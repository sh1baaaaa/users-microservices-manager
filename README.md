# User Microservices Manager

## Описание проекта
Многомодульный проект, представляющий имитацию регистрации/логина и редактирования зарегистрировавшихся пользователей.
Проект включает в себя 3 модуля, а конкретно: два микросервиса и одна библиотека с общими DTO-классами. 
***Основной целью*** проекта является демонстрация взаимодействия микросервисов между собой засчёт брокера сообщения
Apache Kafka

## Структура проекта
- Микросервис регистрации/логина - предоставляет endpoint-ы для аутентификации. В качестве б/д используется Redis. TTL пользователей = 10 часов для снижения нагрузки на сервис самих пользователей
- Микросервисов юзеров - предоставляет endpoint-ы для редактирования существующих пользователей. В качестве б/д используется PostgreSQL
- Модуль-библиотека предоставлящая общие DTO для Producer-ов и Consumer-ов Apache Kafka

- user-topic - топик принимающий новых/зарегистрировавшихся пользователей
- update-user-topic - топик принимающий обновленных пользователей

## Технологический стэк:
- Java 17
- Spring Framework (Boot / Data JPA / Data Redis)
- Apache Kafka
- PostgreSQL
- Redis
- Gradle

## Принцип работы
Два микросервиса содержат свои endpoint-ы

### Микросервис аутентификации
1) ***Регистрация.*** Пользователь отправляет запрос с требуемым телом --> Тело маппится в сущность базы данных и сохраняется в Redis --> Тело пользователя отправляется в user-topic --> Консюмер из сервиса юзеров считывает сообщение и сохраняет пользователя 
2) ***Логин. РАЗРАБАТЫВАЕТСЯ*** Пользователь отправляет запрос с требуемым телом(юзернейм/пароль) --> Сначала идет проверка существует ли данный пользователь в б/д, если да, то сверяется пароль. Иначе отправляется сообщение с юзернеймом и паролем в микросервис юзеров, там проходит конечный процесс аутентификации и отправляется обратное сообщение об успешности

### Микросервис юзеров
1) ***Редактирование.*** У существующего пользователя редактируются поля --> В update-user-topic отправляется сообщение с отредактированным пользователем --> Consumer из микросервися аутентификации считывает сообщение --> Происходит проверка есть ли данный пользователь в Redis, если да, то в нем данные о юзере также обновляются

## Проект на финальной стадии разработки
